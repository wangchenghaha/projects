(function(e){function t(t){for(var a,s,l=t[0],i=t[1],c=t[2],u=0,m=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,l=1;l<r.length;l++){var i=r[l];0!==n[i]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={"setting/role":0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=i;o.push([26,"chunk-vendors","chunk-common"]),r()})({"15ef":function(e,t,r){},26:function(e,t,r){e.exports=r("be0e")},be0e:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("cc00"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("Card",{attrs:{title:e.title}},[r("Form",{staticClass:"formData",attrs:{model:e.searchForm,inline:"","label-width":70}},[r("FormItem",{attrs:{label:"用户编码"}},[r("Input",{attrs:{type:"text",placeholder:"请输入编码"},model:{value:e.searchForm.roleCode,callback:function(t){e.$set(e.searchForm,"roleCode",t)},expression:"searchForm.roleCode"}})],1),r("FormItem",{attrs:{label:"用户名称"}},[r("Input",{attrs:{type:"text",placeholder:"请输入名称"},model:{value:e.searchForm.nameCn,callback:function(t){e.$set(e.searchForm,"nameCn",t)},expression:"searchForm.nameCn"}})],1),r("FormItem",[r("Button",{staticClass:"btn-search",attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v(e._s(e.$t("btn_search")))]),r("Button",{staticClass:"btn-reset",attrs:{type:"primary"},on:{click:e.handleReset}},[e._v(e._s(e.$t("btn_reset")))]),r("Divider",{attrs:{type:"vertical"}}),r("Button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(e._s(e.$t("btn_add")))])],1)],1),e.roleList.length?r("el-table",{staticClass:"roleTable",staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.roleList,border:"","header-cell-style":e.tableCellFn}},[r("el-table-column",{attrs:{prop:"roleCode",label:e.$t("roleCode"),width:"180"}}),r("el-table-column",{attrs:{prop:"nameCn",label:e.$t("nameCn"),width:"180"}}),r("el-table-column",{attrs:{prop:"nameEn",label:e.$t("nameEn"),width:"180"}}),r("el-table-column",{attrs:{prop:"parentCn",label:e.$t("parentRole"),width:"180"}}),r("el-table-column",{attrs:{prop:"typeCn",label:e.$t("typeId"),width:"180"}}),r("el-table-column",{attrs:{prop:"remark",label:e.$t("remark"),width:"180"}}),r("el-table-column",{attrs:{label:e.$t("action"),width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("Button",{staticClass:"action-btn",attrs:{size:"small",type:"primary"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v(e._s(e.$t("btn_edit")))]),r("Button",{staticClass:"action-btn",attrs:{size:"small",type:"primary"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v(e._s(e.$t("btn_delete")))]),r("Button",{staticClass:"action-btn",attrs:{size:"small",type:"primary"},on:{click:function(r){return e.handleAuthorize(t.$index,t.row)}}},[e._v(e._s(e.$t("authorize")))])]}}],null,!1,2767059175)})],1):e._e(),r("Page",{staticClass:"pageFixed",attrs:{total:e.pageTotal,align:"right"},on:{"on-change":e.pageChange}}),r("Modal",{attrs:{width:"800",title:e.$t("edit-role")},on:{"on-cancel":e.editCancel,"on-ok":e.editOk},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[r("Form",{ref:"currentRoleParams",staticClass:"menu-item-write",attrs:{model:e.currentRoleParams,"label-width":100,inline:""}},[r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("parentRole"),prop:"parentCode"}},[r("parent-menu-selector",{ref:"menuSelector2",attrs:{fn:e.getTreeRoles,modalType:"edit",queryItem:"roleCode",editRoleParams:e.currentRoleParams},on:{emitMenuCode:e.emitMenuCode}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("typeId"),prop:"roleCode"}},[r("Select",{staticStyle:{width:"146px"},attrs:{size:"large"},model:{value:e.currentRoleParams.typeId,callback:function(t){e.$set(e.currentRoleParams,"typeId",t)},expression:"currentRoleParams.typeId"}},e._l(e.roleTypeList,(function(t,a){return r("Option",{key:a,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1),r("Col",{attrs:{span:"8"}})],1),r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("roleCode"),prop:"roleCode"}},[r("Input",{attrs:{size:"large",disabled:""},model:{value:e.currentRoleParams.roleCode,callback:function(t){e.$set(e.currentRoleParams,"roleCode",t)},expression:"currentRoleParams.roleCode"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("nameCn"),prop:"nameCn",span:"15"}},[r("Input",{attrs:{size:"large"},model:{value:e.currentRoleParams.nameCn,callback:function(t){e.$set(e.currentRoleParams,"nameCn",t)},expression:"currentRoleParams.nameCn"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("nameEn"),prop:"nameEn"}},[r("Input",{attrs:{size:"large"},model:{value:e.currentRoleParams.nameEn,callback:function(t){e.$set(e.currentRoleParams,"nameEn",t)},expression:"currentRoleParams.nameEn"}})],1)],1)],1),r("Row",[r("Col",{attrs:{span:"24"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("remark"),prop:"remark"}},[r("Input",{staticStyle:{width:"660px"},attrs:{type:"textarea"},model:{value:e.currentRoleParams.remark,callback:function(t){e.$set(e.currentRoleParams,"remark",t)},expression:"currentRoleParams.remark"}})],1)],1)],1)],1)],1),r("Modal",{attrs:{width:"800",title:e.$t("add-role")},on:{"on-cancel":e.addCancel,"on-ok":e.addOk},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[r("Form",{ref:"addRoleParams",staticClass:"menu-item-write",attrs:{model:e.addRoleParams,"label-width":100,inline:""}},[r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("parentRole"),prop:"parentCode"}},[r("parent-menu-selector",{ref:"menuSelector",attrs:{fn:e.getTreeRoles,modalType:"add"},on:{emitMenuCode:e.emitMenuCode}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("typeId"),prop:"roleCode"}},[r("Select",{staticStyle:{width:"146px"},attrs:{size:"large"},model:{value:e.addRoleParams.typeId,callback:function(t){e.$set(e.addRoleParams,"typeId",t)},expression:"addRoleParams.typeId"}},e._l(e.roleTypeList,(function(t,a){return r("Option",{key:a,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1),r("Col",{attrs:{span:"8"}})],1),r("Row",[r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("roleCode"),prop:"roleCode"}},[r("Input",{attrs:{size:"large"},model:{value:e.addRoleParams.roleCode,callback:function(t){e.$set(e.addRoleParams,"roleCode",t)},expression:"addRoleParams.roleCode"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("nameCn"),prop:"nameCn",span:"15"}},[r("Input",{attrs:{size:"large"},model:{value:e.addRoleParams.nameCn,callback:function(t){e.$set(e.addRoleParams,"nameCn",t)},expression:"addRoleParams.nameCn"}})],1)],1),r("Col",{attrs:{span:"8"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("nameEn"),prop:"nameEn"}},[r("Input",{attrs:{size:"large"},model:{value:e.addRoleParams.nameEn,callback:function(t){e.$set(e.addRoleParams,"nameEn",t)},expression:"addRoleParams.nameEn"}})],1)],1)],1),r("Row",[r("Col",{attrs:{span:"24"}},[r("FormItem",{staticClass:"form-item",attrs:{label:e.$t("remark"),prop:"remark"}},[r("Input",{staticStyle:{width:"660px"},attrs:{type:"textarea"},model:{value:e.addRoleParams.remark,callback:function(t){e.$set(e.addRoleParams,"remark",t)},expression:"addRoleParams.remark"}})],1)],1)],1)],1)],1),r("Modal",{attrs:{width:"360",title:e.$t("delete-role")},model:{value:e.showDelete,callback:function(t){e.showDelete=t},expression:"showDelete"}},[r("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:"ios-information-circle"}}),r("span",[e._v(e._s(e.$t("delete-role")))])],1),r("div",{staticStyle:{"text-align":"center"}},[r("p",[e._v(" 确定要删除 "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.currentRoleParams.nameCn))]),e._v("吗？ ")])]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"error",size:"large",long:"",loading:e.modal_loading},on:{click:e.deleletConfirm}},[e._v(e._s(e.$t("btn_delete")))])],1)]),r("role-authorize-modal",{ref:"roleAuthorizeModal",attrs:{roleAuthorizeModalShow:e.roleAuthorizeModalShow},on:{closeRoleAuthorizeModal:e.closeRoleAuthorizeModal}})],1)],1)},o=[],s=(r("4160"),r("d81d"),r("b64b"),r("159b"),r("96cf"),r("1da1")),l=r("5530"),i=r("67d5"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"treeComponent",attrs:{id:"treeComponent"}},[r("div",{staticClass:"treeTop",on:{click:e.ifTreeShowFn}},[e._v(e._s(e.treeSelectedItem))]),e.treeIsShow?r("Card",{staticClass:"treeOuter"},[r("el-table",{attrs:{data:e.dataList,load:e.getData,"show-header":!1,"row-key":"nameCn","cell-style":e.cellStyle,lazy:"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"row-click":e.rowClick}},[r("el-table-column",{attrs:{prop:"nameCn",label:e.$t("nameCn")}})],1)],1):e._e()],1)},d=[],u=r("1f27"),m={name:"parent-menu-selector",props:{fn:{type:Function,require:!1,default:u["c"]},queryItem:{type:String,require:!1,default:"roleCode"},modalType:{type:String,required:!1,default:"add"},editRoleParams:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{treeSelectedItem:"",dataList:[],treeIsShow:!1,selectedArr:[],cellStyle:{padding:"5px 0",cursor:"pointer"}}},methods:{getData:function(e,t,r){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.fn(e.roleCode);case 2:n=t.sent,200===n.code&&0!==n.data.length&&r(n.data.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{hasChildren:!!e.hasChild})})));case 4:case"end":return t.stop()}}),t)})))()},getdataList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataList=[],t.next=3,e.fn();case 3:r=t.sent,200===r.code&&(e.dataList=r.data.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{hasChildren:!!e.hasChild})})));case 5:case"end":return t.stop()}}),t)})))()},ifTreeShowFn:function(e){!1===e?(this.treeIsShow=!1,this.treeSelectedItem=""):this.treeIsShow=!this.treeIsShow},rowClick:function(e,t,r){this.treeSelectedItem=e.nameCn,this.$emit("emitMenuCode",e.roleCode,this.modalType),this.treeIsShow=!1}},created:function(){this.getdataList()},watch:{editRoleParams:function(e){this.treeSelectedItem=e.parentCn,this.$emit("emitMenuCode",e.parentCode,this.modalType)}},mounted:function(){}},p=m,h=(r("cf9b"),r("2877")),f=Object(h["a"])(p,c,d,!1,null,"24057594",null),C=f.exports,b=C,w=r("0f78"),g={name:"Role",components:{roleAuthorizeModal:w["a"],parentMenuSelector:b},data:function(){return{title:this.$t("roleClassification"),isEn:"en-US"===localStorage.getItem("local"),isshow:!1,showEdit:!1,showAdd:!1,showDelete:!1,showAuthorize:!1,modal_loading:!1,roleList:[],multipleSelection:[],menuListAuthorize:{bottomCn:"否",displayCn:"是",hasChild:1,href:"/Invest/Index",icon:"plus-class",isBottom:1,isDisplay:1,menuCode:10,nameCn:"首页",nameEn:"Home",createBy:"张三",parentCode:10,remark:"新增首页菜单",sort:10,sysCode:"Add",target:"_blank",typeCn:"菜单",typeId:20},datas:[],pageTotal:0,searchForm:{nameCn:"",nameEn:"",pageNum:1,pageSize:10,roleCode:"",sortBy:"",sortDirection:""},currentRoleParams:{hasChild:0,nameCn:"",nameEn:"",parentCode:"",remark:"",roleCode:"",typeId:""},addRoleParams:{nameCn:"",nameEn:"",parentCode:"",remark:"",roleCode:"",typeId:""},currentRoleCode:"",AuthedMenulList:[],commonMenuList:[],roleAuthorizeModalShow:!1,getTreeRoles:i["d"],roleTypeList:[{code:10,VALUE_CN:"超级管理员",VALUE_EN:"Supper"},{code:20,VALUE_CN:"系统管理员",VALUE_EN:"System"},{code:30,VALUE_CN:"普通管理员",VALUE_EN:"Normal"},{code:40,VALUE_CN:"用户",VALUE_EN:"User"}]}},created:function(){var e=this;this.roleTypeList=this.roleTypeList.map((function(t){return Object(l["a"])(Object(l["a"])({},t),{},{value:e.isEn?t.VALUE_EN:t.VALUE_CN})}))},mounted:function(){document.title=this.title,this.getRoleList(this.searchForm)},computed:{},methods:{emitMenuCode:function(e,t){"add"===t?this.addRoleParams.parentCode=e:this.currentRoleParams.parentCode=e},closeModal:function(e){this.isshow=e},tableCellFn:function(){},getRoleList:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["b"])(e);case 2:a=r.sent,200===a.code?(t.roleList=a.data,t.pageTotal=a.totalPage):t.$Message.error("获取数据失败");case 4:case"end":return r.stop()}}),r)})))()},handleSearch:function(){this.getRoleList(this.searchForm)},handleReset:function(){this.searchForm.nameCn="",this.searchForm.roleCode="",this.getRoleList(this.searchForm)},handleAdd:function(){this.showAdd=!0},pageChange:function(){},handleEdit:function(e,t){this.currentRoleParams=t,this.showEdit=!0},handleAuthorize:function(e,t){var r=this;this.$refs.roleAuthorizeModal.handleAuthorize(e,t,""),setTimeout((function(){r.roleAuthorizeModalShow=!0}),50)},addOk:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["e"])(e.addRoleParams);case 2:r=t.sent,200===r.code?(e.$Message.success("添加成功"),e.getRoleList(e.searchForm)):e.$Message.error("添加失败");case 4:case"end":return t.stop()}}),t)})))()},addCancel:function(){this.emptyObj(this.addRoleParams)},editOk:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["g"])(e.currentRoleParams);case 2:r=t.sent,200===r.code?(e.$Message.success("更新成功"),e.$refs.menuSelector2.ifTreeShowFn(!1)):e.$Message.error("更新失败");case 4:case"end":return t.stop()}}),t)})))()},editCancel:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.menuSelector2.ifTreeShowFn(!1);case 2:case"end":return t.stop()}}),t)})))()},deleletConfirm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={remark:"删除",roleCode:e.currentRoleParams.roleCode},t.next=3,Object(i["a"])(r);case 3:a=t.sent,200===a.code?(e.$Message.success("删除成功"),e.showDelete=!1,e.getRoleList(e.searchForm)):e.$Message.error("删除失败");case 5:case"end":return t.stop()}}),t)})))()},handleDelete:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.hasChild){e.next=3;break}return r.$Message.error("该角色下包含子角色，请先删除子角色"),e.abrupt("return",!1);case 3:r.currentRoleParams=t,r.showDelete=!0;case 5:case"end":return e.stop()}}),e)})))()},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},closeRoleAuthorizeModal:function(e){this.roleAuthorizeModalShow=e},emptyObj:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$refs.menuSelector.ifTreeShowFn(!1);case 2:Object.keys(e).forEach((function(t){e[t]=""}));case 3:case"end":return r.stop()}}),r)})))()}}},R=g,y=(r("c00e"),Object(h["a"])(R,n,o,!1,null,null,null)),v=y.exports,k=r("fe07");a["a"].config.productionTip=!1,new a["a"]({i18n:k["a"],render:function(e){return e(v)}}).$mount("#app")},c00e:function(e,t,r){"use strict";var a=r("15ef"),n=r.n(a);n.a},cf9b:function(e,t,r){"use strict";var a=r("fcfc"),n=r.n(a);n.a},fcfc:function(e,t,r){}});