(function(t){function e(e){for(var s,n,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&f.push(r[n][0]),r[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},r={"store/retail/toAddMarket/storecode_market_backtoretailform":0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([51,"chunk-vendors","chunk-common"]),a()})({"07de":function(t,e,a){"use strict";(function(t){a("99af"),a("4de4"),a("4160"),a("c975"),a("a15b"),a("45fc"),a("a434"),a("b0c0"),a("a9e3"),a("07ac"),a("ac1f"),a("1276"),a("159b");var s=a("5530"),r=(a("96cf"),a("1da1")),i=a("a403"),n=a("9f8a"),o=a("a102"),c=a("b5c7"),l=a("0965"),u=a("7e1e"),d=a("73f5"),f=a("2d1a"),m=a("5a0c"),h=a.n(m),p=a("3f5e"),g=a("4d59"),b=function(e,a,s){var r=t.get(a,"column.title","");return a.column.validate&&a.column.validate()||a.column.required?e("div",[e("strong",r),e("span",{style:{color:"#e0332d",fontSize:"18px"}},"*")]):e("strong",r)};e["a"]={name:"main-store",components:{baseStoreModa:i["a"],actualModal:o["a"],physicsStoreInfo:c["a"],fileTable:n["a"],bankAccountInfo:l["a"]},props:{mode:{type:String,required:!1,default:"add"},index:{type:[String,Number],required:!1,default:0},baseMarketList:{type:Array,required:!1,default:function(){return[]}}},data:function(){var t=this,e=function(e,a,s){if("0"===t.formData.isPropertyRight&&!a)return s(new Error(t.$t("noEmpty")));s()};return{isEn:"en-US"===localStorage.getItem("local"),beforeUpload:null,shop_business_type:[{code:"1",label:this.$t("Contract")},{code:"2",label:this.$t("Mark2")}],loading:!1,backInfoData:{baseBankInfoList1:[],baseBankInfoList2:[]},formData:{marketCode:"",ranking:"",businessLicense:"",openingPermit:"",landUsePermits:"",constructionPermits:"",houseOwnership:"",ortherPermits:"",shopBusinessType:"1",isActualmarketRight:"",businessLicenseNo:"",taxpayerNo:"",cnName:"",enName:"",pinyin:"",type:"",enterpriseNature:"",enterpriseNatureName:"",actualBusinessNatureName:"",isGeneralTaxpayer:"",legalPerson:"",registeredCapital:"",establishmentDate:"",operatingPeriod:"",businessScope:"",registeredAddress:"",zipCode:"",regionCode:"",region:"",provincesCode:"",provinces:"",cityCode:"",city:"",districtCode:"",district:"",openingDate:"",marketStoreName:"",settledBrands:"",settledBrandsCode:[],groupName:"",groupCode:"",groupLevel:"",houseOwner:"",isPropertyRight:"",contractWithOwnerDate:"",planningPurpose:"",commonSituation:"",houseLocation:"",actualBusinessLicense:"",actualOpeningPermit:"",actualLandUsePermits:"",actualConstructionPermits:"",actualHouseOwnership:"",actualOrtherPermits:"",actualBusinessLicenseNo:"",actualTaxpayerNo:"",actualAuthCertificate:"",actualCnName:"",actualEnName:"",actualPinyinName:"",actualType:"",actualBusinessNature:"",actualIsGeneralTaxpayer:"",actualLegalPerson:"",actualRegisteredCapital:"",actualEstablishmentDate:"",actualOperatingPeriod:"",actualBusinessScope:"",actualRegionCode:"",actualRegion:"",actualProvincesCode:"",actualProvinces:"",actualCityCode:"",actualCity:"",actualDistrictCode:"",actualDistrict:"",actualRegisteredAddress:"",actualZipCode:"",baseBankInfoList:[]},rules:{shopBusinessType:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],isActualmarketRight:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],businessLicenseNo:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],taxpayerNo:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],cnName:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],enName:[{required:!0,validator:Object(f["d"])("isEn",this),trigger:"blur"}],pinyin:[{required:!0,validator:Object(f["d"])("isEn",this),trigger:"blur"}],type:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],enterpriseNature:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],isGeneralTaxpayer:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],legalPerson:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],registeredCapital:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],establishmentDate:[{type:"date",required:!0,message:this.$t("noEmpty"),trigger:"blur"}],operatingPeriod:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],businessScope:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],provincesCode:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],registeredAddress:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],zipCode:[{required:!1,validator:Object(f["d"])("validatePostcode",this),trigger:"blur"}],marketStoreName:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],settledBrandsCode:[{required:!0,message:this.$t("noEmpty"),type:"array",trigger:"change"}],houseOwner:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],contractWithOwnerDate:[{validator:e,trigger:"change"}],isPropertyRight:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],planningPurpose:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],groupCode:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],commonSituation:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],houseLocation:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualBusinessLicenseNo:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],actualTaxpayerNo:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualAuthCertificate:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],actualCnName:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualEnName:[{required:!0,validator:Object(f["d"])("isEn",this),trigger:"blur"}],actualPinyinName:[{required:!0,validator:Object(f["d"])("isEn",this),trigger:"blur"}],actualType:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],actualBusinessNature:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],actualIsGeneralTaxpayer:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],actualLegalPerson:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualRegisteredCapital:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualEstablishmentDate:[{type:"date",required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualOperatingPeriod:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],actualBusinessScope:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualProvincesCode:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],actualRegisteredAddress:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}],actualZipCode:[{required:!0,message:this.$t("noEmpty"),trigger:"blur"}]},dicResultObj:{},columns1:[{title:this.$t("BusinessLicense"),key:"businessLicense",slot:"index1",required:!0,renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[],disabled:!0},{title:this.$t("OpeningPermit"),key:"openingPermit",slot:"index1",required:!0,renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[],disabled:!0},{title:this.$t("LandUseCertificate"),slot:"index1",align:"center",children:[{title:this.$t("landUsePermits"),align:"center",slot:"index1",key:"landUsePermits",width:200,validate:function(){return!t.data1[0].houseOwnership},renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[]},{title:this.$t("constructionPermits"),align:"center",slot:"index1",key:"constructionPermits",width:200,validate:function(){return!t.data1[0].houseOwnership},renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[]}]},{title:this.$t("HousingOwnershipCertificate"),key:"houseOwnership",slot:"index1",validate:function(){return!t.data1[0].constructionPermits||!t.data1[0].landUsePermits},renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[]},{title:this.$t("ortherPermits"),key:"ortherPermits",slot:"index1",multiple:!0,defaultList:[],uploadList:[]}],data1:[{businessLicense:"",openingPermit:"",landUsePermits:"",constructionPermits:"",houseOwnership:"",ortherPermits:""}],columns2:[{title:this.$t("BusinessLicense"),key:"actualBusinessLicense",slot:"index1",required:!0,renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[],disabled:!0},{title:this.$t("OpeningPermit"),key:"actualOpeningPermit",slot:"index1",required:!0,renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[],disabled:!0},{title:this.$t("LandUseCertificate"),slot:"index1",align:"center",children:[{title:this.$t("landUsePermits"),align:"center",slot:"index1",key:"actualLandUsePermits",width:200,validate:function(){return!t.data2[0].actualHouseOwnership},disabled:!0,renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[]},{title:this.$t("constructionPermits"),align:"center",slot:"index1",key:"actualConstructionPermits",width:200,disabled:!0,validate:function(){return!t.data2[0].actualHouseOwnership},renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[]}]},{title:this.$t("HousingOwnershipCertificate"),key:"actualHouseOwnership",slot:"index1",disabled:!0,validate:function(){return!t.data2[0].actualConstructionPermits||!t.data2[0].actualLandUsePermits},renderHeader:function(e,a){return b(e,a,t)},defaultList:[],uploadList:[]},{title:this.$t("ortherPermits"),key:"actualOrtherPermits",slot:"index1",multiple:!0,defaultList:[],uploadList:[],disabled:!0}],data2:[{actualBusinessLicense:"",actualOpeningPermit:"",actualLandUsePermits:"",actualConstructionPermits:"",actualHouseOwnership:"",actualOrtherPermits:""}],haveActualBusiness:!1,actualHavaStoreInfo:!1}},computed:{baseBankInfoList:function(){return this.formData.baseBankInfoList},dictionary:function(){var e={},a=this.dicResultObj;if(t.isEmpty(a))return{};for(var s in a)e[s]=Object(f["a"])(a[s],this.isEn);return e.shop_business_type=this.shop_business_type,e},fileTableMode:function(){return"read"===this.mode?"read":"input"},actualFileTableMode:function(){return"read"===this.mode||this.haveActualBusiness?"read":"input"}},created:function(){var t=this,e=["yesorno","market_type","market_enterprise_nature","brand"];Object(u["a"])(e.join(",")).then((function(e){200===e.code&&(t.dicResultObj=Object.assign({},e.data))})),this.beforeUpload=function(){return!!String(t.formData.isActualmarketRight)||(t.$Modal.warning({title:"提示",content:"请先选择”合同商场和实际经营商场是否一致“字段!"}),!1)}},methods:{cancel:function(){this.$emit("cancel",!1)},handleClick:function(){this.$refs.input.click()},handleSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,r,i,n,o,c,l,u,d,f,m,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.bank1.handleSubmit();case 2:if(a=e.sent,r=t.$refs.data1.validate(),i=t.backInfoData.baseBankInfoList1.length,n=!0,o=!0,c=!0,"1"===t.formData.isActualmarketRight){e.next=14;break}return o=t.$refs.data2.validate(),e.next=12,t.$refs.bank2.handleSubmit();case 12:n=e.sent,c=t.backInfoData.baseBankInfoList2.length;case 14:return l="1"===t.formData.isActualmarketRight||t.formData.actualBusinessLicenseNo!==t.formData.businessLicenseNo&&"0"===t.formData.isActualmarketRight,e.next=17,t.$refs.formInline.validate();case 17:u=e.sent,u&&a&&n&&r&&o&&i&&c&&l?(d=t.backInfoData,f=d.baseBankInfoList1,m=d.baseBankInfoList2,t.formData.baseBankInfoList=t.banckInfoDeleteId(f.concat(m)),h=t.changeDateFn(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},t.formData),t.data1[0]),t.data2[0]),{},{settledBrandsCode:t.formData.settledBrandsCode.join(",")})),t.$emit("storeSubmit",h,t.mode,t.index),t.cancel(),t.$Message.success(t.$t("saveSuccess"))):u&&a&&n&&r&&o?(i||t.$Message.error(t.$t("PhysicalStoreManagementWarn")),c||t.$Message.error(t.$t("BankAccountInformationWarn")),l||t.$Message.error("营业执照号不能重复!")):t.$Message.error(t.$t("requiredItemsNone"));case 19:case"end":return e.stop()}}),e)})))()},changeDateFn:function(e){for(var a in e){var s=e[a];t.isDate(s)&&(e[a]=h()(s).format("YYYY-MM-DD"))}return e},bizLicenseOCRFn:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,r,i,n,o,c,l,u,f,m,h,p,g;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t[0].formData,s){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,Object(d["d"])(s);case 5:if(r=a.sent,200!==r.code){a.next=15;break}if(i=r.data,n=i.address,o=i.regNum,c=i.person,l=i.business,u=i.period,f=i.name,m=i.capital,o){a.next=10;break}return a.abrupt("return");case 10:return a.next=12,e.checkBzzCodeAsync(o);case 12:h=a.sent,p=h.data.market,p?(e.setBaseInfoAndM(p,"OCR"),e.haveBzzCode=!0):(e.haveBzzCode=!1,g=[{key:"registeredCapital",value:m},{key:"registeredAddress",value:n},{key:"legalPerson",value:c},{key:"businessLicenseNo",value:o},{key:"businessScope",value:l},{key:"cnName",value:f}],e.dataChange(g),e.changeStr(u,"operatingPeriod"),e.formData.taxpayerNo=o);case 15:case"end":return a.stop()}}),a)})))()},bizLicenseOCRFn2:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,r,i,n,o,c,l,u,f,m,h,p,g;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t[0].formData,a.next=3,Object(d["d"])(s);case 3:if(r=a.sent,200!==r.code){a.next=13;break}if(i=r.data,n=i.address,o=i.regNum,c=i.person,l=i.business,u=i.period,f=i.name,m=i.capital,o){a.next=8;break}return a.abrupt("return");case 8:return a.next=10,e.checkActualBzzCodeAsync(o);case 10:h=a.sent,p=h.data.market,p?(e.setAcBaseInfoAndM(p,"OCR"),e.haveActualBzzCode=!0):(e.haveActualBzzCode=!1,g=[{key:"actualRegisteredCapital",value:m},{key:"actualRegisteredAddress",value:n},{key:"actualLegalPerson",value:c},{key:"actualBusinessLicenseNo",value:o},{key:"actualBusinessScope",value:l},{key:"actualCnName",value:f}],e.dataChange(g),e.changeStr(u,"actualOperatingPeriod"),e.formData.actualTaxpayerNo=o);case 13:case"end":return a.stop()}}),a)})))()},dataChange:function(t){var e=this;t.forEach((function(t){e.formData[t.key]=t.value}))},changeStr:function(t,e){if(t){var a=t.split("至"),s="",r="";a.forEach((function(t,e){var a=t.split("")[0]+t.split("")[1]+t.split("")[2]+t.split("")[3],i=t.split("")[5]+t.split("")[6],n=t.split("")[8]+t.split("")[9],o="".concat(a,"-").concat(i,"-").concat(n);e?r=o:s=o})),this.formData[e]=s+"#"+r}},actualBusinessLicenseNoChange:function(e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var r,i,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r=e.query,i=e.type,"select"!==i){s.next=9;break}if(!a.isRepeatNo(r,a.baseMarketList,"actualBusinessLicenseNo")){s.next=5;break}return a.$Message.error("营业执照号不能重复!"),s.abrupt("return");case 5:a.haveActualBzzCode=!0,a.checkBzzCodeFn2(r),s.next=10;break;case 9:"clear"===i?(a.haveActualBzzCode=!1,a.clear2()):"change"===i&&a.haveActualBzzCode&&(a.haveActualBzzCode=!1,n=t.cloneDeep(g["d"]),o=n.indexOf("actualBusinessLicenseNo"),n.splice(o,1),a.clear2(n));case 10:case"end":return s.stop()}}),s)})))()},businessLicenseNoChange:function(e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var r,i,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r=e.query,i=e.type,String(a.formData.isActualmarketRight)||"select"!==i&&"change"!==i){s.next=5;break}return a.$Modal.warning({title:"提示",content:"请先选择”合同商场和实际经营商场是否一致“字段!"}),a.formData.businessLicenseNo="",s.abrupt("return");case 5:if("select"!==i){s.next=13;break}if(!a.isRepeatNo(r,a.baseMarketList,"businessLicenseNo")){s.next=9;break}return a.$Message.error("营业执照号不能重复!"),s.abrupt("return");case 9:a.haveBzzCode=!0,a.checkBzzCodeFn1(r),s.next=14;break;case 13:"clear"===i?(a.haveBzzCode=!1,a.clear1()):"change"===i&&a.haveBzzCode&&(a.haveBzzCode=!1,n=t.cloneDeep(g["c"]),o=n.indexOf("businessLicenseNo"),n.splice(o,1),a.clear1(n));case 14:case"end":return s.stop()}}),s)})))()},isActualmarketRightChange:function(t){var e=this;this.clear1(),this.$nextTick((function(){e.haveActualBusiness=!1,e.clear3(),"0"===e.formData.isActualmarketRight?(e.clear2(),e.addSetFormDatas()):e.clear2()}))},clear3:function(){this.formData=Object.assign({},this.formData,this.arrKey(g["e"],null,!0))},clear2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g["d"];"0"===this.formData.isActualmarketRight?this.formData=Object.assign({},this.formData,this.arrKey(t,null,!0),this.arrKey(g["e"],null,!0)):this.formData=Object.assign({},this.formData,this.arrKey(t,null,!0)),this.backInfoData=Object.assign(this.backInfoData,{baseBankInfoList2:[]}),this.deleteActualShoppingMall(),this.formData.actualAuthCertificate="",this.$refs.actualBase&&(this.$refs.actualBase.setActualAuthCertificateDefaultList(""),this.$refs.actualBase.actualCity=[])},deleteActualShoppingMall:function(){this.data2=Object.assign([],this.contact({},this.data2[0]));var t=function t(e){e.forEach((function(e){e.children?t(e.children):(e.defaultList=[],e.uploadList=[])}))};t(this.columns2),this.$refs.data2&&this.$refs.data2.removeAll()},clear1:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g["c"];this.deleteMainShoppingMall(),e=t.cloneDeep(g["c"]),e.splice(e.indexOf("isActualmarketRight"),1),"1"===this.formData.isActualmarketRight?this.formData=Object.assign({},this.formData,this.arrKey(g["e"],null,!0),this.arrKey(e,null,!0)):this.formData=Object.assign({},this.formData,this.arrKey(e,null,!0)),this.backInfoData=Object.assign(this.backInfoData,{baseBankInfoList1:[]})},deleteMainShoppingMall:function(){this.data1=Object.assign([],this.contact({},this.data1[0]));var t=function t(e){e.forEach((function(e){e.children?t(e.children):(e.defaultList=[],e.uploadList=[])}))};t(this.columns1),this.$refs.data1.removeAll()},checkBzzCodeFn1:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.checkBzzCodeAsync(t);case 2:return s=a.sent,r=s.data.market,r&&(e.haveBzzCode=!0,e.setBaseInfoAndM(r)),a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},setBaseInfoAndM:function(e,a){"OCR"===a&&(e.businessLicense=this.data1[0].businessLicense),this.deleteMainShoppingMall(),this.data1=Object.assign([],this.contact(e,this.data1[0])),this.getFilesFn(this.columns1,this.data1);var s={Stirng:["isActualmarketRight","type","registeredCapital","PropertyOwner","isGeneralTaxpayer"]};e=Object(f["c"])(e,s),e.settledBrandsCode=Object.assign([],e.settledBrandsCode.split(",")),this.backInfoData=Object.assign(this.backInfoData,{baseBankInfoList1:e.baseBankInfoList});var r=t.cloneDeep(g["c"]);r.splice(r.indexOf("isActualmarketRight"),1),"1"===this.formData.isActualmarketRight?this.formData=Object.assign(this.formData,this.arrKey(g["e"],e),this.arrKey(r,e)):this.formData=Object.assign(this.formData,this.arrKey(r,e));var i=e,n=i.regionCode,o=i.provincesCode,c=i.cityCode,l=i.districtCode;this.$refs.base.provincesCode=[n,o,c,l]},checkBzzCodeFn2:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.checkActualBzzCodeAsync(t);case 2:return s=a.sent,r=s.data.market,r&&(e.haveActualBzzCode=!0,e.setAcBaseInfoAndM(r)),a.abrupt("return",s);case 6:case"end":return a.stop()}}),a)})))()},setAcBaseInfoAndM:function(t,e){if("1"!==this.formData.isActualmarketRight){"OCR"===e&&(t.actualBusinessLicense=this.data2[0].actualBusinessLicense),this.deleteActualShoppingMall(),this.data2=Object.assign([],this.contact(t,this.data2[0]));var a={Stirng:["actualIsGeneralTaxpayer","actualType","PropertyOwner","actualRegisteredCapital"]};t.settledBrandsCode=Object.assign([],t.settledBrandsCode.split(",")),t=Object(f["c"])(t,a),this.backInfoData=Object.assign(this.backInfoData,{baseBankInfoList2:t.baseBankInfoList}),this.formData=Object.assign(this.formData,this.arrKey(g["d"],t),this.arrKey(g["e"],t)),this.getFilesFn(this.columns2,this.data2),this.$refs.actualBase.setActualAuthCertificateDefaultList(this.formData.actualAuthCertificate);var s=t,r=s.actualRegionCode,i=s.actualProvincesCode,n=s.actualCityCode,o=s.actualDistrictCode;this.$refs.actualBase.actualCity=[r,i,n,o]}},checkActualBzzCodeAsync:function(t){return Object(d["h"])({filter:{bzzCode:t}})},checkBzzCodeAsync:function(t){return Object(d["j"])({filter:{bzzCode:t,isActualmarketRight:this.formData.isActualmarketRight}})},contact:function(e,a){var s=[],r={};for(var i in a)r[i]="",t.isEmpty(e)||(r[i]=e[i]);return s.push(r),s},banckInfoDeleteId:function(e){var a=[];return e.length?(e.forEach((function(e){var s={};for(var r in e)g["f"].indexOf(r)>=0&&(s[r]=e[r]);t.isEmpty(s)||a.push(s)})),a):[]},arrKey:function(e,a,s){var r={};return e.length?(e.forEach((function(e){s&&(r[e]=""),s||t.isNil(a)||(r[e]=a[e])})),r):r},isRepeatNo:function(t,e,a){var s=this;return e.some((function(e,r){return"add"===s.mode?e[a]===t&&"1"===e.shopBusinessType:e[a]===t&&"1"===e.shopBusinessType&&r!==s.index}))},editFn:function(){"add"===this.mode?this.addSetFormDatas():this.commonSetFormDatas(),this.formData.actualEstablishmentDate=new Date(this.formData.actualEstablishmentDate)},addSetFormDatas:function(){var t=this,e=this.$parent.formData.baseMarketList;if(e.length&&(this.index||"edit"!==this.mode)){var a,r=e.filter((function(t){return"1"===String(t.isActualmarketRight)&&(a=!0),"1"===String(t.shopBusinessType)}));a&&(this.formData.isActualmarketRight="0");var i=r[0];if("1"===String(i.isActualmarketRight)){for(var n in g["b"]){var o=g["b"][n];this.formData[o]=i[n]}var c=[];i.baseBankInfoList.forEach((function(e){var a=Object(s["a"])(Object(s["a"])({},e),{},{belongsType:4});c.push(a),t.formData.baseBankInfoList.push(a)})),this.backInfoData.baseBankInfoList2=c,this.data2=Object.assign([],this.contact(this.formData,this.data2[0]))}else{for(var l in g["b"]){var u=g["b"][l];this.formData[u]=i[u]}this.formData.actualAuthCertificate=i.actualAuthCertificate,this.backInfoData=Object.assign(this.backInfoData,{baseBankInfoList2:this.getBaseBankInfoList(i.baseBankInfoList,{key:"belongsType",value:"4"})}),this.data2=Object.assign([],this.contact(i,this.data2[0]))}this.formData=Object.assign(this.formData,this.arrKey(g["e"],i)),this.haveActualBusiness=!0;var d={Stirng:["shopBusinessType","isActualmarketRight","isPropertyRight","zipCode","actualZipCode","actualIsGeneralTaxpayer"]},m=i.settledBrandsCode.split(",");this.formData=Object.assign({},Object(f["c"])(this.formData,d),{settledBrandsCode:m}),this.getAllFile();var h=i.actualRegionCode,p=i.actualProvincesCode,b=i.actualCityCode,y=i.actualDistrictCode;this.$refs.actualBase.actualCity=[h,p,b,y]}},commonSetFormDatas:function(){var t=this.$parent.formData.baseMarketList;if(t.length){var e=t[this.index],a={Stirng:["shopBusinessType","isActualmarketRight","isPropertyRight","zipCode","actualZipCode","actualIsGeneralTaxpayer"]};e=Object(f["c"])(e,a);var s=e.settledBrandsCode.split(",");this.formData=Object.assign({},e,{settledBrandsCode:s}),this.backInfoData=Object.assign(this.backInfoData,{baseBankInfoList1:this.getBaseBankInfoList(e.baseBankInfoList,{key:"belongsType",value:"2"})}),this.data1=Object.assign([],this.contact(e,this.data1[0])),this.backInfoData=Object.assign(this.backInfoData,{baseBankInfoList2:this.getBaseBankInfoList(e.baseBankInfoList,{key:"belongsType",value:"4"})}),this.data2=Object.assign([],this.contact(e,this.data2[0])),this.getAllFile(),"0"===String(this.formData.isActualmarketRight)&&this.index&&"edit"===this.mode&&(this.haveActualBusiness=!0);var r=e,i=r.actualRegionCode,n=r.actualProvincesCode,o=r.actualCityCode,c=r.actualDistrictCode;this.$refs.actualBase.actualCity=[i,n,o,c];var l=e,u=l.regionCode,d=l.provincesCode,m=l.cityCode,h=l.districtCode;this.$refs.base.provincesCode=[u,d,m,h]}},getAllFile:function(){var t=this;this.getFilesFn(this.columns1,this.data1),this.getFilesFn(this.columns2,this.data2),setTimeout((function(){t.$refs.actualBase&&t.$refs.actualBase.setActualAuthCertificateDefaultList(t.formData.actualAuthCertificate)}))},getFilesFn:function(t,e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var r,i,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r=Object.values(e[0]),i=function t(e,a,s){e.forEach((function(e){e.children?t(e.children,a,s):a===e.key&&e.defaultList.push(s)}))},r.length){s.next=4;break}return s.abrupt("return");case 4:return s.next=6,Object(p["b"])(r.join(","));case 6:n=s.sent,200===n.code&&(o=n.data,o.length&&o.forEach((function(s){for(var r in e[0])if(e[0][r].indexOf(s.id)>=0){var n={name:s.originalFilename,id:s.id,url:a.$config.fsUrl+s.filePath};i(t,r,n)}})));case 8:case"end":return s.stop()}}),s)})))()},getBaseBankInfoList:function(t,e){var a=e.key,s=e.value;return t&&t.length?t.filter((function(t){return String(t[a])===s})):[]}},mounted:function(){this.editFn()},watch:{mode:function(){this.editFn()}}}}).call(this,a("2ef0"))},51:function(t,e,a){t.exports=a("8ae8")},"877d":function(t,e,a){},"89a2":function(t,e,a){"use strict";var s=a("877d"),r=a.n(s);r.a},"8ae8":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("cc00"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-container"},[a("form-header",{attrs:{title:t.title,"serial-number":t.formData.sn}}),a("Form",{ref:"form",attrs:{model:t.formData,rules:t.ruleInline,inline:"","label-position":"left","label-width":100}},[a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("applicantInfo")}},[a("applicant")],1),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("baseStoreInfo")}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopCode"),prop:"shopCode"}},[a("form-mode",{ref:"shopcode",attrs:{columns:t.shopCodeColumns,searchData:t.shopCodeSearchData,apiFun:t.getShopList,disabled:""},on:{select:t.getShopListSelect}},[a("Input",{attrs:{readonly:"",type:"text",disabled:""},model:{value:t.formData.shopCode,callback:function(e){t.$set(t.formData,"shopCode",e)},expression:"formData.shopCode"}})],1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("brandCode"),prop:"brand"}},[a("Input",{attrs:{readonly:"",type:"text",disabled:""},model:{value:t.formData.brand,callback:function(e){t.$set(t.formData,"brand",e)},expression:"formData.brand"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopTypeCode"),prop:"shopTypeCode"}},[a("Select",{attrs:{disabled:""},model:{value:t.formData.shopTypeCode,callback:function(e){t.$set(t.formData,"shopTypeCode",e)},expression:"formData.shopTypeCode"}},t._l(t.dictionary.shop_type,(function(e){return a("Option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.label)+" ")])})),1)],1)],1)],1),a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopName"),prop:"shopName"}},[a("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.shopName,callback:function(e){t.$set(t.formData,"shopName",e)},expression:"formData.shopName"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopEnName"),prop:"shopEnName"}},[a("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.shopEnName,callback:function(e){t.$set(t.formData,"shopEnName",e)},expression:"formData.shopEnName"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("mallNameCn"),prop:"marketName"}},[a("Input",{attrs:{type:"text",disabled:""},model:{value:t.mainMarketName,callback:function(e){t.mainMarketName=e},expression:"mainMarketName"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("isSelf"),prop:"isSelf"}},[a("Select",{attrs:{disabled:""},model:{value:t.formData.isSelf,callback:function(e){t.$set(t.formData,"isSelf",e)},expression:"formData.isSelf"}},t._l(t.dictionary.yesorno,(function(e){return a("Option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.label)+" ")])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopStatus"),prop:"shopStatus"}},[a("Select",{attrs:{"label-in-value":"",disabled:""},on:{"on-change":function(e){return t.itemChange("shopStatus",arguments)}},model:{value:t.formData.shopStatus,callback:function(e){t.$set(t.formData,"shopStatus",e)},expression:"formData.shopStatus"}},t._l(t.dictionary.shop_status,(function(e){return a("Option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.label)+" ")])})),1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("storeAddress"),prop:"shopAddress",title:t.formData.storeAddress}},[a("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.shopAddress,callback:function(e){t.$set(t.formData,"shopAddress",e)},expression:"formData.shopAddress"}})],1)],1)],1)],1),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("storeInfo")}},[a("div",[a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"width90",attrs:{label:t.$t("isMultiSignOneContract"),prop:"isMultiSignOneContract"}},[a("Poptip",{attrs:{trigger:"hover","word-wrap":"",content:t.$t("isMultiSignOneContractWarn")}},[a("Select",{attrs:{disabled:""},model:{value:t.formData.isMultiSignOneContract,callback:function(e){t.$set(t.formData,"isMultiSignOneContract",e)},expression:"formData.isMultiSignOneContract"}},t._l(t.dictionary.yesorno,(function(e){return a("Option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.label)+" ")])})),1)],1)],1)],1)],1),"read"!==t.pageType&&""===t.flowsType?a("div",{staticClass:"mgBottom10"},[a("Button",{staticClass:"mgRight10",attrs:{ghost:"",type:"primary"},on:{click:t.addFn1}},[t._v(t._s(t.$t("addMark1")))]),a("Button",{attrs:{ghost:"",type:"primary"},on:{click:t.addFn2}},[t._v(t._s(t.$t("addMark2")))])],1):t._e(),a("Table",{attrs:{columns:t.baseMarketListColumns,data:t.formData.baseMarketList},scopedSlots:t._u([{key:"action",fn:function(e){e.row;var s=e.index;return"read"===t.pageType?[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.readAndEdit(s,"read")}}},[t._v(t._s(t.$t("detail"))+" ")])]:void 0}}],null,!0)})],1)]),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("qualificationInfo")}},[a("AuditTableLegalToRetail",{ref:"qua",attrs:{pageType:t.pageType}})],1),a("WorkFlow",{ref:"wfb",attrs:{ignoreType:["general"],taskButtonVisible:t.taskButtonVisible,workFlowStatusVisible:t.workFlowStatusVisible,taskCommentVisible:t.taskCommentVisible,bizKeyExisted:t.flowStatusObj.bizKey,defKey:t.flowStatusObj.defKey,instIdExisted:t.flowStatusObj.instId},on:{onFlowStartUp:t.onFlowStartUp,onFlowResult:t.onFlowResult,onFlowResubmit:t.onFlowResubmit},model:{value:t.flowStatusObj.taskId,callback:function(e){t.$set(t.flowStatusObj,"taskId",e)},expression:"flowStatusObj.taskId"}})],1),t.modal1?a("mainStoreLegal",{ref:"mis",attrs:{flowsType:t.flowsType,pageType:t.alreadyType,baseMarketList:t.formData.baseMarketList,mode:t.mode1,index:t.index},on:{cancel:function(e){return t.addMainStore(!1)},storeSubmit:t.storeSubmit},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}}):t._e(),t.modal2?a("add-mate-store",{ref:"mes",attrs:{baseMarketList:t.formData.baseMarketList,mode:t.mode2,index:t.index},on:{cancel:function(e){return t.addMateStore(!1)},storeSubmit:t.storeSubmit},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}}):t._e()],1)},i=[],n=(a("a434"),a("c72e")),o=a("3da0"),c=a("472f"),l=a("73f5"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",t._g(t._b({attrs:{fullscreen:"",title:t.$t("AddingContract")}},"Modal",t.$attrs,!1),t.$listeners),[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancel}},[t._v(t._s(t.$t("cancel")))]),"read"!==t.mode?a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("btn_save")))]):t._e()],1),a("Form",{ref:"formInline",attrs:{model:t.formData,rules:t.rules,inline:"","label-width":100,"label-position":"left"}},[a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("Qualificationsofcontract")}},[a("Tag",{staticClass:"mgBottom10",attrs:{type:"border",color:"error"}},[t._v(t._s(t.$t("propertyIncludesStoreAddress")))]),a("file-table",{ref:"data1",attrs:{formData:t.formData,columns:t.columns1,datas:t.data1,mode:t.fileTableMode,beforeUpload:t.beforeUpload},scopedSlots:t._u([{key:"additional",fn:function(e){return["businessLicense"===e.column.key?a("Button",{attrs:{type:"success",disabled:""},on:{click:function(a){return t.bizLicenseOCRFn(e.column.uploadList)}}},[t._v("OCR识别")]):t._e()]}}])})],1),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("BasicInfo")}},[a("base-store-moda",t._b({ref:"base",attrs:{mode:"read",formData:t.formData,dictionary:t.dictionary},on:{isActualmarketRightChange:t.isActualmarketRightChange,businessLicenseNoChange:t.businessLicenseNoChange}},"base-store-moda",t.$attrs,!1))],1),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("PhysicsMarketInfo")}},[a("Tag",{staticClass:"mgBottom10",attrs:{type:"border",color:"error"}},[t._v(t._s(t.$t("PhysicsMarketWarn")))]),a("physicsStoreInfo",{attrs:{formData:t.formData,dictionary:t.dictionary,mode:"read",haveActualBusiness:t.haveActualBusiness}})],1),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("PhysicalStoreManagement")}},[a("bank-account-info",{ref:"bank1",attrs:{disabled:"",formData:t.backInfoData,itemKey:"baseBankInfoList1",specialField:{belongsType:2}}})],1),"1"!==t.formData.isActualmarketRight?a("div",[a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("QualificationsofActual")}},[a("file-table",{ref:"data2",attrs:{formData:t.formData,columns:t.columns2,datas:t.data2,mode:t.actualFileTableMode},scopedSlots:t._u([{key:"additional",fn:function(e){return["actualBusinessLicense"===e.column.key?a("Button",{attrs:{type:"success",disabled:""},on:{click:function(a){return t.bizLicenseOCRFn2(e.column.uploadList)}}},[t._v("OCR识别")]):t._e()]}}],null,!1,3051884791)})],1),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("PracticalBusinessMarkets")}},[a("actual-modal",t._b({ref:"actualBase",attrs:{mode:"read",haveActualBusiness:t.haveActualBusiness,formData:t.formData,dictionary:t.dictionary},on:{businessLicenseNoChange:t.actualBusinessLicenseNoChange}},"actual-modal",t.$attrs,!1))],1),a("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("BankAccountInformation")}},[a("bank-account-info",{ref:"bank2",attrs:{disabled:"",formData:t.backInfoData,itemKey:"baseBankInfoList2",specialField:{belongsType:4}}})],1)],1):t._e()],1)],1)],1)},d=[],f=a("07de"),m=f["a"],h=(a("89a2"),a("2877")),p=Object(h["a"])(m,u,d,!1,null,"6b0551a5",null),g=p.exports,b={name:"storecode_market_backtoretailform",mixins:[n["a"],o["a"]],components:{AuditTableLegalToRetail:c["a"],mainStoreLegal:g},data:function(){return{flowsType:"legalBack"}},computed:{pageType:function(){return this.alreadyDone?"read":"input"},taskCommentVisible:function(){return!1},taskButtonVisible:function(){return!0},workFlowStatusVisible:function(){return!0}},methods:{storeSubmit:function(t,e,a){"add"===e?this.formData.baseMarketList.push(t):this.formData.baseMarketList.splice(a,1,t),this.formData=Object.assign({},this.formData)},onFlowResubmit:function(t){var e=this;this.$refs.form.validate((function(a){if(a){var s=e.save();Object(l["a"])(s).then((function(a){200===a.code?(e.$refs.wfb.executeFlow(t,!0),e.sn=a.data.sn):e.$Message.error(a.message||e.$t("save-fail"))}))}else e.$Message.error(e.$t("requiredItemsNone"))}))},onFlowResult:function(t){var e=this,a=t.cmdType;"processStatus"!==a&&("saveTaskDraft"===a?this.$rcmMessage.show({content:"暂存成功"}):this.$rcmMessage.show({onOk:function(){e.$router2.push.call(e,"/wflow/my")}}))},onFlowStartUp:function(t){var e=this;this.formData.baseMarketList.length?this.$refs.form.validate((function(a){if(a){if(!e.validShop())return;var s=e.save();Object(l["a"])(s).then((function(a){200===a.code?(e.$refs.wfb.startFlow(t,a.data.sn),e.sn=a.data.sn):e.$Message.error(a.message||e.$t("save-fail"))})),e.loading=!1}else e.$Message.error(e.$t("requiredItemsNone"))})):this.$Message.info("请添加商场信息")}}},y=b,k=(a("bef5"),Object(h["a"])(y,r,i,!1,null,"1f2cbd02",null)),v=k.exports,C=a("fe07");s["a"].config.productionTip=!1,new s["a"]({i18n:C["a"],render:function(t){return t(v)}}).$mount("#app")},"8fe3":function(t,e,a){},bef5:function(t,e,a){"use strict";var s=a("8fe3"),r=a.n(s);r.a}});