(function(t){function a(a){for(var o,n,i=a[0],l=a[1],c=a[2],d=0,m=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);p&&p(a);while(m.length)m.shift()();return s.push.apply(s,c||[]),e()}function e(){for(var t,a=0;a<s.length;a++){for(var e=s[a],o=!0,i=1;i<e.length;i++){var l=e[i];0!==r[l]&&(o=!1)}o&&(s.splice(a--,1),t=n(n.s=e[0]))}return t}var o={},r={"store/retail/toAddMarket/storecode_market_legalform":0},s=[];function n(a){if(o[a])return o[a].exports;var e=o[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=o,n.d=function(t,a,e){n.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,a){if(1&a&&(t=n(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var o in t)n.d(e,o,function(a){return t[a]}.bind(null,o));return e},n.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(a,"a",a),a},n.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=a,i=i.slice();for(var c=0;c<i.length;c++)a(i[c]);var p=l;s.push([55,"chunk-vendors","chunk-common"]),e()})({"213f":function(t,a,e){"use strict";var o=e("dd0d"),r=e.n(o);r.a},55:function(t,a,e){t.exports=e("6775")},"5b71":function(t,a,e){"use strict";(function(t){e("99af"),e("4de4"),e("7db0"),e("4160"),e("c975"),e("a15b"),e("d81d"),e("ac1f"),e("1276"),e("498a"),e("159b");var o=e("5530"),r=e("73f5"),s=e("0eb8"),n=e("2d1a"),i=e("7e1e"),l=e("b9b5"),c=e("35f4"),p=e("d928"),d=e("4d59");a["a"]={name:"storecode_market_legalform",components:{AuditTablelegal:p["a"],WorkFlow:l["b"],Applicant:s["a"],QuaInfoTab:c["a"]},data:function(){return{title:this.$t("to-add-market"),isEn:"en-US"===localStorage.getItem("local"),query:this.$router2.getQuery(),flowsType:"legalform",tabsName:"0",dicResultObj:{},flowStatusObj:{defKey:"rcm_storecode_market",taskId:"",instId:"",bizKey:""},formData:{actualOpenDate:"",lawComment:"",shopLocation:"",shopName:"",physicalCity:"",cnName:"",groupName:"",floorAndArea:"",taskComment:"",cityRetilManager:"",planOpenDate:"",shopTypeCode:"",regionalRetailManager:"",shopAddress:"",settledBrands:""},applicantData:{},ruleInline:{shopCode:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}],isMultiSignOneContract:[{required:!0,message:this.$t("noEmpty"),trigger:"change"}]},baseShopInfo:{}}},created:function(){var a=this,e=["market_enterprise_nature","shop_belongs_to_country","shop_location","company_name","shop_properties","shop_type","brand","brand_type","jl_brand_series","yesorno","shop_level","shop_status","network_operator","sisterBrand","area_unit","floor"];Object(i["a"])(e.join(",")).then((function(t){200===t.code&&(a.dicResultObj=Object.assign({},t.data))}));var o=this.query.bizKey;this.flowStatus(this.query),Object(r["l"])({sn:o}).then((function(e){if(200===e.code&&!t.isEmpty(e.data)){var o=e.data.baseShopInfo;o.baseMarketList.forEach((function(t){delete t.baseShopInfo,delete t.id,t.baseBankInfoList.length&&t.baseBankInfoList.forEach((function(t){delete t.id}))}));var r,s,i,l=e.data,c=l.cityRetilManager,p=l.floorAndArea,d=l.mainMarketName,m=l.openRate,u=l.regionalRetailManager,f=l.shopLocation,b=l.market,h={Stirng:["hasPosDevice","vmSeries","isSelf"],Number:["gradeTotalPoints","gradeAppointment","gradeRefundPeriod"]},g=e.data.baseShopInfo,y=g.usableArea,v=g.floor,w=g.areaUnit;p||(r=a.dicResultObj.floor.filter((function(t){return v.indexOf(t.code)>=0})).map((function(t){return t.valueEn})).join(","),s=a.dicResultObj.area_unit.find((function(t){return String(t.code)===String(w)})),r&&s&&(i="".concat(r,"/").concat(y).concat(s.valueEn))),o=Object(n["c"])(o,h),a.baseShopInfo=Object.assign({},o),a.formData=Object.assign({},o,{floorAndArea:p||i,mainMarketName:d,openRate:m,cityRetilManager:c||"无",regionalRetailManager:u||"无",shopLocation:f},b,{shopCode:o.shopCode}),a.$refs.qua.setValue(o.marketApproveDetailList),a.applicantData=Object.assign({},e.data.applicant)}}))},computed:{disabled:function(){return"alreadyDone"===this.$router2.getQuery().pageFrom},taskButtonVisible:function(){return!0},workFlowStatusVisible:function(){return!0},taskCommentVisible:function(){return!1},dictionary:function(){var t={},a=this.dicResultObj;for(var e in a)t[e]=Object(n["a"])(a[e],this.isEn);return t},marketList:function(){var t=this.formData.baseMarketList;if(!t)return[];var a=0,e=0;return t.forEach((function(t){"1"===String(t.shopBusinessType)?(a++,t.tabName="合同主体商场"+a):(e++,t.tabName="物管商场"+e)})),t},settledBrands:function(){if(!this.formData.settledBrands)return"";var t=this.formData.settledBrands.split(","),a=d["a"],e=[];return t.forEach((function(t){t=t.trim(),a.forEach((function(a){t.indexOf(a.key)>=0&&e.push(a.value)}))})),e.join(",")}},methods:{lawCommentChange:function(){this.$refs.wfb.formData.taskComment=this.formData.lawComment},getNewMarkStutus:function(a){var e="";if(a.length){var o=a.filter((function(a){return t.isNil(a.shopId)}));if(o.length){var r=o.filter((function(t){return"1"===String(t.shopBusinessType)}));r.length?r.length===o.length?e="onlyHaveContract":r.length<o.length&&(e="haveBoth"):e="onlyHaveActual"}}return e},onFlowResubmit:function(a){var e=this,s=this.$refs.qua.submit();if(!this.formData.lawComment&&"rollBackTask"===a.cmdId||s.approveLevelList[4].approveLevelId&&!this.formData.lawComment)this.$Message.error(this.$t("taskCommentWarn"));else{var n=t.isEmpty(this.query)?this.sn:this.flowStatusObj.bizKey,i={marketNew:{sn:n,markApproveLevel:"onlyHaveActual"===this.getNewMarkStutus(this.formData.baseMarketList)?1:""},shopInfoVo:Object(o["a"])(Object(o["a"])({},this.baseShopInfo),{},{lawComment:this.formData.lawComment,marketApproveDetailList:s.marketApproveDetailList,commandId:"submit",commandType:"startandsubmit",definitionKey:"rcm_storecode_market"}),approveLevelListVO:{approveLevelList:s.approveLevelList}};Object(r["a"])(i).then((function(t){200===t.code?(e.$refs.wfb.executeFlow(a,!0),e.sn=t.data.sn):e.$Message.error(t.message||e.$t("save-fail"))}))}},onFlowResult:function(t){var a=this,e=t.cmdType;"processStatus"!==e&&("saveTaskDraft"===e?this.$rcmMessage.show({content:"暂存成功"}):this.$rcmMessage.show({onOk:function(){a.$router2.push.call(a,"/wflow/processed")}}))},flowStatus:function(t){var a=t.defKey,e=t.taskId,o=t.instId,r=t.bizKey;this.flowStatusObj=Object.assign({},{defKey:a,taskId:e,instId:o,bizKey:r})}},mounted:function(){document.title=this.title}}}).call(this,e("2ef0"))},6775:function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("cc00"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-container"},[e("form-header",{attrs:{title:t.title,"serial-number":t.formData.sn}}),e("Form",{ref:"form",attrs:{model:t.formData,rules:t.ruleInline,inline:"","label-position":"left","label-width":100}},[e("Card",{staticClass:"mgBottom10"},[e("h2",[t._v(" "+t._s(t.formData.brand)+" - "+t._s(t.formData.shopNature)+" - "+t._s("1"===t.formData.isSelf?t.$t("isSelf1"):t.$t("isSelf0"))+" ")])]),e("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("applicantInfo")}},[e("applicant",{attrs:{applicantData:t.applicantData}})],1),e("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("baseStoreInfo")}},[e("Row",[e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopName"),prop:"shopName"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.shopName,callback:function(a){t.$set(t.formData,"shopName",a)},expression:"formData.shopName"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("Poptip",{attrs:{trigger:"hover","word-wrap":"",content:t.formData.cnName}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("mallNameCn"),prop:"cnName"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.cnName,callback:function(a){t.$set(t.formData,"cnName",a)},expression:"formData.cnName"}})],1)],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("group"),prop:"groupName"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.groupName,callback:function(a){t.$set(t.formData,"groupName",a)},expression:"formData.groupName"}})],1)],1)],1),e("Row",[e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("actualCity"),prop:"physicalCity"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.physicalCity,callback:function(a){t.$set(t.formData,"physicalCity",a)},expression:"formData.physicalCity"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("regionalRetailManager"),prop:"regionalRetailManager"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.regionalRetailManager,callback:function(a){t.$set(t.formData,"regionalRetailManager",a)},expression:"formData.regionalRetailManager"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("cityRetilManager"),prop:"cityRetilManager"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.cityRetilManager,callback:function(a){t.$set(t.formData,"cityRetilManager",a)},expression:"formData.cityRetilManager"}})],1)],1)],1),e("Row",[e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("openRate"),prop:"openRate"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.openRate,callback:function(a){t.$set(t.formData,"openRate",a)},expression:"formData.openRate"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopTypeCode"),prop:"shopTypeCode"}},[e("Select",{attrs:{disabled:""},model:{value:t.formData.shopTypeCode,callback:function(a){t.$set(t.formData,"shopTypeCode",a)},expression:"formData.shopTypeCode"}},t._l(t.dictionary.shop_type,(function(a){return e("Option",{key:a.code,attrs:{value:a.code}},[t._v(t._s(a.label))])})),1)],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("shopLocation"),prop:"shopLocation"}},[e("Select",{attrs:{disabled:""},model:{value:t.formData.shopLocation,callback:function(a){t.$set(t.formData,"shopLocation",a)},expression:"formData.shopLocation"}},t._l(t.dictionary.shop_location,(function(a){return e("Option",{key:a.code,attrs:{value:a.code}},[t._v(t._s(a.label))])})),1)],1)],1)],1),e("Row",[e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("actualOpeningDate"),prop:"planOpenDate"}},[t.formData.actualOpenDate?e("DatePicker",{attrs:{type:"date",disabled:""},model:{value:t.formData.actualOpenDate,callback:function(a){t.$set(t.formData,"actualOpenDate",a)},expression:"formData.actualOpenDate"}}):e("DatePicker",{attrs:{type:"date",disabled:""},model:{value:t.formData.planOpenDate,callback:function(a){t.$set(t.formData,"planOpenDate",a)},expression:"formData.planOpenDate"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("floorAndArea"),prop:"floorAndArea"}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.floorAndArea,callback:function(a){t.$set(t.formData,"floorAndArea",a)},expression:"formData.floorAndArea"}})],1)],1),e("Col",{attrs:{span:"8"}},[e("Poptip",{attrs:{trigger:"hover","word-wrap":"",content:t.settledBrands}},[e("FormItem",{staticClass:"width90",attrs:{label:t.$t("settledBrandsOther"),prop:"settledBrands"}},[e("Input",{attrs:{type:"text",value:t.settledBrands,disabled:""}})],1)],1)],1)],1),e("Row",[e("Col",{attrs:{span:"24"}},[e("FormItem",{staticStyle:{width:"97%"},attrs:{label:t.$t("storeAddress"),prop:"shopAddress",title:t.formData.storeAddress}},[e("Input",{attrs:{type:"text",disabled:""},model:{value:t.formData.shopAddress,callback:function(a){t.$set(t.formData,"shopAddress",a)},expression:"formData.shopAddress"}})],1)],1)],1)],1),e("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("mallAptitude")}},[e("Tabs",{attrs:{type:"card"},model:{value:t.tabsName,callback:function(a){t.tabsName=a},expression:"tabsName"}},t._l(t.marketList,(function(a,o){return e("TabPane",{key:a.id,attrs:{label:a.tabName,name:String(o)}},[String(o)===String(t.tabsName)?e("QuaInfoTab",{attrs:{item:a}}):t._e()],1)})),1)],1),e("Card",{staticClass:"mgBottom10",attrs:{title:t.$t("qualificationInfo")}},[e("AuditTablelegal",{ref:"qua",attrs:{pageType:t.disabled?"read":"input"}})],1),e("Card",{attrs:{title:t.$t("lawComment")}},[e("FormItem",{staticStyle:{width:"100%"},attrs:{"label-width":0,prop:"lawComment"}},[e("Input",{attrs:{type:"textarea",rows:4,disabled:t.disabled},on:{"on-change":t.lawCommentChange},model:{value:t.formData.lawComment,callback:function(a){t.$set(t.formData,"lawComment",a)},expression:"formData.lawComment"}})],1)],1),e("WorkFlow",{ref:"wfb",attrs:{ignoreType:["general"],taskButtonVisible:t.taskButtonVisible,workFlowStatusVisible:t.workFlowStatusVisible,taskCommentVisible:t.taskCommentVisible,bizKeyExisted:t.flowStatusObj.bizKey,defKey:t.flowStatusObj.defKey,instIdExisted:t.flowStatusObj.instId},on:{onFlowResult:t.onFlowResult,onFlowResubmit:t.onFlowResubmit},model:{value:t.flowStatusObj.taskId,callback:function(a){t.$set(t.flowStatusObj,"taskId",a)},expression:"flowStatusObj.taskId"}})],1)],1)},s=[],n=e("5b71"),i=n["a"],l=(e("213f"),e("2877")),c=Object(l["a"])(i,r,s,!1,null,"6ee2701f",null),p=c.exports,d=e("fe07");o["a"].config.productionTip=!1,new o["a"]({i18n:d["a"],render:function(t){return t(p)}}).$mount("#app")},dd0d:function(t,a,e){}});