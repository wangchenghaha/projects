<view class="wrapper">
    <view class="header {{showSearch ? 'active': ''}}" catchtap='cancelsearch'>
        <view class="content {{showSearch ? 'active': ''}}" catchtap='stop'>
            <!-- Âü∫Á°ÄÊéßÂà∂ -->
            <view class="topper">
                <view class="tabbox">
                    <view class="tab-item" data-index='1' bindtap='changeIndex'>ËøõË°å‰∏≠</view>
                    <view class="tab-item" data-index='2' bindtap='changeIndex'>Â∑≤ÂÆåÊàê</view>
                    <view class="tab-item" data-index='3' bindtap='changeIndex'>Â∑≤ÂèñÊ∂à</view>
                    <view class="underline" style='left: {{16.6667 + 16.6667 * 2 * (tabIndex - 1)}}%'></view>
                </view>
                <view class="searchbar" bindtap='startSearch'>
                    <image class="image" src="../common/icon/search.png"></image>
                </view>
            </view>
            <!-- ÊêúÁ¥¢Êù° -->
            <view class="searchbox">
                <input type="text" placeholder="üîçÂßìÂêç„ÄÅÁîµËØùÊàñËÄÖÈ¢ÑÁ∫¶ÁºñÂè∑" placeholder-class='holder_text' class="input" value='{{searchVal}}' data-type='search' bindinput="inputVal" confirm-type='search' bindconfirm='getData' />
            </view>
        </view>
    </view>
    <!-- ‰∏ªË¶ÅÂÜÖÂÆπ -->
    <view class="main-ceontent">
        <scroll-view class="scroll-view" enable-back-to-top scroll-y bindscrolltolower='bindscrolltolower'>
            <view class="user-item" wx:for="{{datalist}}" wx:key='{{index}}' data-item='{{item}}' bindtap='checkDetail'>
                <view class="left">
                    <view class="name">{{item.name}}</view>
                    <view class='mobile' data-mobile="{{item.mobile}}" catchtap='makephonecall'>
                        <image src='../common/icon/phone.png' class='icon'/>
                        <text class="tit">{{item.mobile}}</text>
                    </view>
                </view>
                <view class="right">
                    <view>È¢ÑÁ∫¶Âà∞Â∫óÊó∂Èó¥Ôºö</view>
                    <view> {{item.appoint_time}} {{item.time || ''}}</view>
                </view>
            </view>    

            <!-- Ê≤°ÊúâÈ¢ÑÁ∫¶Êï∞ÊçÆ -->
            <view class="nodata" wx:if="{{datalist && datalist.length === 0}}">
                <view class="content">
                    <view class="imagebox">
                        <image class="image" src="../common/icon/appointment.png"></image>
                    </view>
                    <view class="tips">ÊÇ®ÂΩìÂâçÊöÇÊó†È¢ÑÁ∫¶ËÆ∞ÂΩï„ÄÇ</view>
                </view>
            </view> 
        </scroll-view>
            
    </view>

    <!-- ËØ¶ÊÉÖÂºπÁ™ó -->
    <view class="detail" wx:if='{{checkdetail}}'>
        <view class="detail-content">
            <view class="detail-header">
                <view class="code">
                    <text class="tit">È¢ÑÁ∫¶ÁºñÂè∑:</text>
                    <text class="con">{{oneItem.appoint_code}}</text>
                </view>
                <view class="closebox" bindtap='closeDetailModal'>
                    <image class="btn" src="../common/icon/close.png"></image>
                </view>
            </view>

            <!-- ‰∏≠Èó¥ -->
            <view class="info">
                <view class="content">
                    <view class="name">{{oneItem.name}}</view>
                    <view class="mobile" data-mobile="{{oneItem.mobile}}" catchtap='makephonecall'>ÁîµËØù : {{oneItem.mobile}}</view>
                </view>
            </view>

            <!-- ÊòØÂê¶Êâ∂Ê≤ü -->
            <view class="form">
                <view class="content">
                    <view class="title">È°æÂÆ¢ÊòØÂê¶‰∫ßÁîüÂ§çË¥≠</view>
                    <view class="checkbox">
                        <view class="checkbox-item" data-status='1' bindtap='changeRebackStatus'>
                            <view class="iconbox {{oneItem.isHasReback === true ? 'active':''}}">
                                <image src='../common/icon/select2.png' class="icon" />
                            </view>
                            <view class="tit">ÊòØ</view>
                        </view>
                        <view class="checkbox-item" data-status='0' bindtap='changeRebackStatus'>
                            <view class="iconbox {{oneItem.isHasReback === false ? 'active':''}}">
                                <image src='../common/icon/select2.png' class="icon" />
                            </view>
                            <view class="tit">Âê¶</view>
                        </view>
                    </view>

                    <view class="inputbox">
                        <input type="number" value="{{oneItem.rebackNumber}}" data-type='reback' bindinput="inputVal" placeholder="ËØ∑ËæìÂÖ•Â§çË¥≠ÈáëÈ¢ù" placeholder-class="input-placeholder" disabled="{{!oneItem.isHasReback}}"  class="input {{oneItem.isHasReback ? '':'disabled'}}"/>
                    </view>

                    <view class="footer">
                        <view class="concelbtn" hover-class="hoverclass">
                            <button class="btn" catchtap='cancelOrder'>ÂèñÊ∂àÈ¢ÑÁ∫¶</button>
                        </view>
                        <view class="btnbox" hover-class="{{oneItem.isHasReback && oneItem.rebackNumber || oneItem.isHasReback === false ? 'hoverclass':''}}" >
                            <button class="btn {{oneItem.isHasReback && oneItem.rebackNumber || oneItem.isHasReback === false ? 'active':'disabled'}}" catchtap="{{oneItem.isHasReback && oneItem.rebackNumber || oneItem.isHasReback === false ? 'completeOrder':''}}" >Â∑≤ÂÆåÊàê</button>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
</view>